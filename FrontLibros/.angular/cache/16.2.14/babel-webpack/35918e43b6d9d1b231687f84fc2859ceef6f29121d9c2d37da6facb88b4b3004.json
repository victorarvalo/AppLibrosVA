{"ast":null,"code":"import { FormControl, FormGroup } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/Storage/Sesion-Storage.Service\";\nimport * as i3 from \"src/app/Library/Services/resena.service.service\";\nimport * as i4 from \"@angular/forms\";\nconst _c0 = [\"class\", \"resena\"];\nexport class CreateResenaComponent {\n  constructor(route, _sessionStorageService, _resenaServiceService) {\n    this.route = route;\n    this._sessionStorageService = _sessionStorageService;\n    this._resenaServiceService = _resenaServiceService;\n    this.aspNetUserNav = '';\n    this.bookLocal = JSON.parse(JSON.stringify(this.route.getCurrentNavigation()?.extras.state)).book;\n    this.formulario = new FormGroup({\n      calificacionresena: new FormControl(),\n      descripcionresena: new FormControl(),\n      fecharesena: new FormControl(),\n      aspnetuser: new FormControl()\n    });\n  }\n  ngOnInit() {\n    const lenghtSession = this._sessionStorageService.length;\n    if (lenghtSession > 0) {\n      const firstKey = this._sessionStorageService.key(0);\n      const emailUser = this._sessionStorageService.getItem(firstKey);\n      this.aspNetUserNav = emailUser !== null ? emailUser : '';\n    } else {\n      this.aspNetUserNav = '';\n    }\n  }\n  createResena() {\n    let resena = {\n      \"idlibro\": 0,\n      \"calificacionresena\": 0,\n      \"descripcionresena\": '',\n      \"fecharesena\": '',\n      \"aspnetuser\": ''\n    };\n    const dataform = this.formulario.value;\n    resena.idlibro = this.bookLocal.idlibro;\n    resena.calificacionresena = Number(dataform.calificacionresena);\n    resena.descripcionresena = dataform.descripcionresena;\n    resena.aspnetuser = dataform.aspnetuser;\n    resena.fecharesena = Date.now().toString();\n    this._resenaServiceService.postCreateResenas(resena).subscribe(data => {\n      if (data.state == 200) {\n        console.log(\"Reseña creada exitosamente!!\");\n      }\n    }, error => {\n      console.log(error);\n    });\n    this.route.navigateByUrl('bookdetails', {\n      state: {\n        book: this.bookLocal\n      }\n    });\n  }\n  static #_ = this.ɵfac = function CreateResenaComponent_Factory(t) {\n    return new (t || CreateResenaComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.SessionStorageService), i0.ɵɵdirectiveInject(i3.ResenaServiceService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CreateResenaComponent,\n    selectors: [[\"app-create\", 8, \"resena\"]],\n    attrs: _c0,\n    decls: 36,\n    vars: 5,\n    consts: [[1, \"container\", 2, \"width\", \"80%\", \"border-color\", \"blue\", \"border\", \"10px\"], [1, \"d-flex\", \"justify-content-center\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"mb-3\"], [\"type\", \"text\", \"formControlName\", \"descripcionresena\", 1, \"form-control\"], [\"type\", \"text\", \"formControlName\", \"calificacionresena\", \"placeholder\", \"1|2|3|4|5\", 1, \"form-control\"], [\"type\", \"text\", \"formControlName\", \"aspnetuser\", \"ng-disabled\", \"true\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-outline-primary\"]],\n    template: function CreateResenaComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\", 1);\n        i0.ɵɵtext(2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 1)(4, \"label\");\n        i0.ɵɵtext(5, \"Titulo: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"label\");\n        i0.ɵɵtext(7);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"div\", 1)(9, \"label\");\n        i0.ɵɵtext(10, \"Autor: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"label\");\n        i0.ɵɵtext(12);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(13, \"div\", 1)(14, \"label\");\n        i0.ɵɵtext(15, \"Categoria: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"label\");\n        i0.ɵɵtext(17);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(18, \"div\", 0)(19, \"form\", 2);\n        i0.ɵɵlistener(\"ngSubmit\", function CreateResenaComponent_Template_form_ngSubmit_19_listener() {\n          return ctx.createResena();\n        });\n        i0.ɵɵelementStart(20, \"div\", 3)(21, \"label\");\n        i0.ɵɵtext(22, \"Descripci\\u00F3n:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(23, \"br\")(24, \"input\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"div\", 3)(26, \"label\");\n        i0.ɵɵtext(27, \"Calificaci\\u00F3n:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(28, \"br\")(29, \"input\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"div\", 3)(31, \"label\");\n        i0.ɵɵtext(32, \"Usuario:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(33, \"br\")(34, \"input\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(35, \"input\", 7);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"Crear Rese\\u00F1a para \", ctx.bookLocal.titulolibro, \"\");\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\" \", ctx.bookLocal.titulolibro, \"\");\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\" \", ctx.bookLocal.autorlibro, \"\");\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.bookLocal.idcategoriaNavigation.nombrecategoria);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"formGroup\", ctx.formulario);\n      }\n    },\n    dependencies: [i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.FormControlName],\n    styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["FormControl","FormGroup","CreateResenaComponent","constructor","route","_sessionStorageService","_resenaServiceService","aspNetUserNav","bookLocal","JSON","parse","stringify","getCurrentNavigation","extras","state","book","formulario","calificacionresena","descripcionresena","fecharesena","aspnetuser","ngOnInit","lenghtSession","length","firstKey","key","emailUser","getItem","createResena","resena","dataform","value","idlibro","Number","Date","now","toString","postCreateResenas","subscribe","data","console","log","error","navigateByUrl","_","i0","ɵɵdirectiveInject","i1","Router","i2","SessionStorageService","i3","ResenaServiceService","_2","selectors","attrs","_c0","decls","vars","consts","template","CreateResenaComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","CreateResenaComponent_Template_form_ngSubmit_19_listener","ɵɵelement","ɵɵadvance","ɵɵtextInterpolate1","titulolibro","autorlibro","ɵɵtextInterpolate","idcategoriaNavigation","nombrecategoria","ɵɵproperty"],"sources":["C:\\Users\\CXVXC\\Documents\\LibrosApp\\AppLibrosVA\\FrontLibros\\src\\app\\Library\\Components\\Resena\\create.resena\\create.resena.component.ts","C:\\Users\\CXVXC\\Documents\\LibrosApp\\AppLibrosVA\\FrontLibros\\src\\app\\Library\\Components\\Resena\\create.resena\\create.resena.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { ResenaServiceService } from 'src/app/Library/Services/resena.service.service';\nimport { SessionStorageService } from 'src/app/Storage/Sesion-Storage.Service';\n\n@Component({\n  selector: 'app-create.resena',\n  templateUrl: './create.resena.component.html',\n  styleUrls: ['./create.resena.component.css']\n})\nexport class CreateResenaComponent implements OnInit{\n  bookLocal:any;\n\n  formulario: FormGroup;\n  aspNetUserNav: string = '';\n\n  constructor(private route: Router,\n    private _sessionStorageService: SessionStorageService,\n    private _resenaServiceService: ResenaServiceService\n  ){\n    this.bookLocal = (JSON.parse(\n      JSON.stringify(this.route.getCurrentNavigation()?.extras.state)\n    )).book;\n    this.formulario = new FormGroup({\n      calificacionresena: new FormControl(),\n      descripcionresena: new FormControl(),\n      fecharesena: new FormControl(),\n      aspnetuser: new FormControl()\n    })\n  }\n  ngOnInit(): void {\n    const lenghtSession = this._sessionStorageService.length;\n    if(lenghtSession>0){\n      const firstKey = this._sessionStorageService.key(0);\n      const emailUser = this._sessionStorageService.getItem<string>(firstKey!);\n      this.aspNetUserNav = emailUser !== null ? emailUser : '';\n    }\n    else{\n      this.aspNetUserNav = '';\n    }\n  }\n\n  createResena() {\n    let resena = {\n      \"idlibro\": 0,\n      \"calificacionresena\": 0,\n      \"descripcionresena\": '',\n      \"fecharesena\": '',\n      \"aspnetuser\": ''\n    }\n    const dataform = this.formulario.value;\n    resena.idlibro = this.bookLocal.idlibro;\n    resena.calificacionresena = Number(dataform.calificacionresena);\n    resena.descripcionresena = dataform.descripcionresena;\n    resena.aspnetuser = dataform.aspnetuser\n    resena.fecharesena = Date.now().toString();\n    this._resenaServiceService.postCreateResenas(resena).subscribe(\n      data=>{\n        if(data.state == 200){\n          console.log(\"Reseña creada exitosamente!!\");\n        }\n      },error=>{\n        console.log(error);\n      }\n    );\n    this.route.navigateByUrl('bookdetails', {\n      state: {book: this.bookLocal}\n    });\n  }\n}\n","<div class=\"container\" style=\"width: 80%; border-color: blue; border: 10px;\">\n  <h2 class=\" d-flex justify-content-center\">Crear Reseña para {{bookLocal.titulolibro}}</h2>\n  <div class=\" d-flex justify-content-center\">\n    <label>Titulo: </label>\n    <label> {{bookLocal.titulolibro}}</label>\n  </div>\n  <div class=\" d-flex justify-content-center\">\n    <label>Autor: </label>\n    <label> {{bookLocal.autorlibro}}</label>\n  </div>\n  <div class=\" d-flex justify-content-center\">\n    <label>Categoria: </label>\n    <label>{{bookLocal.idcategoriaNavigation.nombrecategoria}}</label>\n  </div>\n</div>\n<div class=\"container\" style=\"width: 80%; border-color: blue; border: 10px;\">\n  <form [formGroup]=\"formulario\" (ngSubmit)=\"createResena()\">\n      <div class=\"mb-3\">\n        <label>Descripción:</label><br/>\n        <input type=\"text\" class=\"form-control\" formControlName=\"descripcionresena\">\n      </div>\n      <div class=\"mb-3\">\n        <label>Calificación:</label><br/>\n        <input type=\"text\" class=\"form-control\" formControlName=\"calificacionresena\"\n        placeholder=\"1|2|3|4|5\">\n      </div>\n      <div class=\"mb-3\">\n        <label>Usuario:</label><br/>\n        <input type=\"text\" class=\"form-control\" formControlName=\"aspnetuser\" ng-disabled=\"true\">\n      </div>\n      <input type=\"submit\" class=\"btn btn-outline-primary\">\n  </form>\n</div>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}